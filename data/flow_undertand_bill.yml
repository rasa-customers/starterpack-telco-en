flows:
  understand_bill:
    if: slots.user_authenticated # the user has to be authenticated in order to access this flow
    description: This flow allows users to check their bill and billing related details.
    steps:
      - collect: bill_month
        description: this slot is a month so they user can say Jan but we need to store it as January.
        ask_before_filling: False
      - action: action_verify_bill_by_date
      - collect: breakdown_cost
        next:
          - if: slots.breakdown_cost # it has to be 'slots', this means breakdown_cost is True
            then:
              - action: action_recap_bill
              - collect: more_bill_details
                next:
                  - if: slots.more_bill_details
                    then:
                      - action: utter_provide_bill_sources
                        next: "END"
                  - else: offer_more_help_section # this will call "offer_more_help_section" section

          - else: offer_more_help_section

      - id: offer_more_help_section # This will help avoid re-writting the same piece of code, this way it can be re-used
        collect: offer_more_help
        next:
          - if: slots.offer_more_help
            then:
              - action: utter_connect_to_human
              - action: action_sleep_few_sec
              -  link: pattern_human_handoff
            
          - else:
            - action: utter_end_conversation
              next: "END"
            